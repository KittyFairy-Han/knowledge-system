(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{295:function(t,s,a){t.exports=a.p+"assets/img/1561753948353_pic.12e8f1d3.png"},296:function(t,s,a){t.exports=a.p+"assets/img/image.91ec2e72.png"},297:function(t,s,a){t.exports=a.p+"assets/img/Snipaste_2025-07-31_16-02-13.67e1d952.png"},298:function(t,s,a){t.exports=a.p+"assets/img/Snipaste_2025-08-16_18-30-40.4ed945b7.png"},299:function(t,s,a){t.exports=a.p+"assets/img/Snipaste_2025-08-03_19-27-40.e0392dea.png"},300:function(t,s,a){t.exports=a.p+"assets/img/Snipaste_2025-08-16_21-15-54.4023046c.png"},301:function(t,s,a){t.exports=a.p+"assets/img/Snipaste_2025-08-03_16-52-41.891fce60.png"},427:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-背景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-背景"}},[t._v("#")]),t._v(" 1.背景")]),t._v(" "),s("p",[t._v("介绍 MUI 之前，先简单了解一些概念"),s("br"),t._v("\n提到 AI 应用，以 chatgpt 为例介绍基础概念\n"),s("img",{attrs:{src:a(295),alt:"基础概念"}}),t._v("\n结合电商业务场景，通常一次消息需要渲染的内容会复杂的多，不会是纯文本，比如 AI 找一次消息\n"),s("img",{attrs:{src:a(296),alt:"回答内容示例"}}),t._v("\n如果业务自己开发，直接对接模型返回的数据，需要消化的概念和需要处理的数据逻辑会很复杂，因为\n传统请求与 AI 问答存在显著差异：\n"),s("img",{attrs:{src:a(297),alt:"回答内容示例chatgpt的conversation流式接口"}})]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("流式数据特性")]),t._v("：模型生成内容是渐进式的，不像传统 API 一次性返回完整结果")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("数据结构复杂")]),t._v("：原始内容直接拿来用就是 markdown，没办法渲染成丰富的 ui 形式")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("智能编排复用")]),t._v("：不同业务使用的 AI 底层能力很有可能一样，如何复用而不用 AI 工程每次适配业务")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("模型推 UI")]),t._v("：每个业务都想搞个类似 copilot，如何快速搭建出一个 bot，尽量复用已有的能力或者物料"),s("br"),t._v(" "),s("strong",[t._v("为了让业务开发像日常写个 React 组件那样丝滑，让底层能力高度复用，通用能力可插拔，让就产生了 mui")]),t._v(" "),s("img",{attrs:{src:a(298),alt:"简单的架构图"}})]),t._v(" "),s("p",[t._v("业务接入有两种形式，")])])]),t._v(" "),s("ul",[s("li",[t._v("高度定制时推荐使用 sdk 接入方式，mui 会处理好数据")]),t._v(" "),s("li",[t._v("简单通用场景可以走 0 代码搭建出一个 bot")])]),t._v(" "),s("h2",{attrs:{id:"_2-demo-演示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-demo-演示"}},[t._v("#")]),t._v(" 2.demo 演示")]),t._v(" "),s("p",[t._v("目前三个落地的场景都是高度定制，通过 sdk 接入的"),s("br"),t._v("\n以 AI 找为例，简单介绍一下使用流程")]),t._v(" "),s("ol",[s("li",[t._v("平台上进行一系列配置，"),s("a",{attrs:{href:"%E5%9C%BA%E6%99%AF%E8%AF%A6%E6%83%85%E9%93%BE%E6%8E%A5%E5%BE%85%E8%A1%A5%E5%85%85"}},[t._v("跳转到天梭后台")])]),t._v(" "),s("li",[s("a",{attrs:{href:"%E9%93%BE%E6%8E%A5%E5%BE%85%E8%A1%A5%E5%85%85"}},[t._v("演示前台 demo 页面")]),t._v("，关注网络面板中的流式过程\n")]),t._v(" "),s("li",[t._v("业务前端实现（片段）")])]),t._v(" "),s("div",{staticClass:"language-tsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-tsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("IndexPage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* step1 常规开发的本地状态 */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setStatus"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token generic-function"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wait"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"process"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"finish"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wait"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("itemList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setItemList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token generic-function"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("stepItems"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setStepItems"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token generic-function"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("staticConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setStaticConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token generic-function"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* step2 AI问答能力的实例 */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" current"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" stream "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Stream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" sceneCode"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SC_1f1445b21"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bizType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"plugin_search_ai_find"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("init")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* step2 调用实例方法发起问答 */")]),t._v("\n    stream\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" bizParams"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" query"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"适合夏天汉服的轻盈头饰"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onLayout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("layout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"process"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStaticConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("layout"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("staticConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compsInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* step3 刷新本地状态，数据驱动渲染 */")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItemList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compsInfo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("streamData"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("multi_offer_list"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStepItems")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compsInfo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("streamData"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("common_cot"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("cotStepList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onFinish")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"finish"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onFail")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" firstCategoryOffers "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" itemList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("subItemList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("test-page"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("contentContainer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wait"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n            ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GuideHeader")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("staticConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n            ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("分析步骤")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n            ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SimpleSteps")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("stepItems"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n          ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"finish"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n            ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("AI找商机结果")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n            ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Result")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("categories")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("itemList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n          ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n    ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("修改天梭后台的配置，前台 demo 页面刷新生效")])]),t._v(" "),s("h2",{attrs:{id:"_3-实现方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-实现方案"}},[t._v("#")]),t._v(" 3.实现方案")]),t._v(" "),s("p",[t._v("从前端 sdk 切入（部分核心），来分享一下 mui 中的核心设计思想和能力")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("实例属性")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("messageInfo")]),t._v(" "),s("td",[t._v("消息详情包含 id 和状态等")])]),t._v(" "),s("tr",[s("td",[t._v("componentsInfo")]),t._v(" "),s("td",[t._v("包含布局信息和渲染数据")])])])])]),t._v(" "),s("li",[s("p",[t._v("实例方法")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("API 名称")]),t._v(" "),s("th",[t._v("使用场景")]),t._v(" "),s("th",[t._v("返回值")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("createStream")]),t._v(" "),s("td",[t._v("创建新的消息")]),t._v(" "),s("td",[t._v("当前 stream 实例")])]),t._v(" "),s("tr",[s("td",[t._v("replayStream")]),t._v(" "),s("td",[t._v("重放消息（恢复中断的流、显示流完的历史消息）")]),t._v(" "),s("td",[t._v("当前 stream 实例")])]),t._v(" "),s("tr",[s("td",[t._v("abortStream")]),t._v(" "),s("td",[t._v("中断当前消息")]),t._v(" "),s("td",[t._v("void")])])])])]),t._v(" "),s("li",[s("p",[t._v("监听事件/生命周期 hook"),s("br"),t._v("\n调用示例（伪代码）：new Stream().createStream().onStart(callback)")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Event 名称")]),t._v(" "),s("th",[t._v("触发时机")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("onStart")]),t._v(" "),s("td",[t._v("开始响应")])]),t._v(" "),s("tr",[s("td",[t._v("onLayout")]),t._v(" "),s("td",[t._v("响应了布局信息")])]),t._v(" "),s("tr",[s("td",[t._v("onUpdate")]),t._v(" "),s("td",[t._v("数据更新事件（后续每帧数据）")])]),t._v(" "),s("tr",[s("td",[t._v("onFinish")]),t._v(" "),s("td",[t._v("消息正常结束")])]),t._v(" "),s("tr",[s("td",[t._v("onFail")]),t._v(" "),s("td",[t._v("消息失败")])])])])])]),t._v(" "),s("h3",{attrs:{id:"_3-1-createstream-分层流式数据协议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-createstream-分层流式数据协议"}},[t._v("#")]),t._v(" 3.1 createStream & 分层流式数据协议")]),t._v(" "),s("p",[t._v("分层的数据协议，简单理解就是对于 onLayout、 onUpdate、onFinish（结合时序图和 demo，createStream 触发流式请求，然后触发生命周期中几个重要的事件）")]),t._v(" "),s("blockquote",[s("p",[s("img",{attrs:{src:a(299),alt:"时序图"}})])]),t._v(" "),s("p",[s("strong",[t._v("这样设计的原因：")])]),t._v(" "),s("ul",[s("li",[t._v("动态 UI 架构 - 我们采用模型驱动的动态 UI 架构，AI 会实时输出结构化的 UI 描述，决定展示哪些组件、怎样排列。而前端这边，我们用了一套基于微模块的组件体系，可以按需加载不同的组件，实现灵活组合和渲染。\n")]),t._v(" "),s("li",[t._v("抹平流式复杂度 - 拆解数据和 UI，产生最小数据单元（AI chunk）和最小渲染单元（UI chunk）。通过 chunk 映射的机制，mui 这一层把对数据输分发到对应的组件，业务开发无需感知数据分帧到达过程。经过拆解就更加原子化，有利于复用和编排。\n"),t._v(" "),s("a",{attrs:{href:"./static/Snipaste_2025-08-02_18-30-54.png"}},[t._v("详细解释")]),t._v(" "),s("a",{attrs:{href:"./static/Snipaste_2025-07-21_15-16-33.png"}},[t._v("映射关系")])])]),t._v(" "),s("p",[s("strong",[t._v("对比传统优势")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("传统方式")]),t._v(" "),s("th",[t._v("MUI 方式")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("业务需手动解析每帧数据")]),t._v(" "),s("td",[t._v("SDK 自动完成数据聚合")])]),t._v(" "),s("tr",[s("td",[t._v("每个业务重复实现流式逻辑")]),t._v(" "),s("td",[t._v("通用逻辑一次封装多次复用")])]),t._v(" "),s("tr",[s("td",[t._v("强耦合 AI 返回数据结构")]),t._v(" "),s("td",[t._v("AI 与 UI 解耦")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-2-replaystream-断点续流的能力"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-replaystream-断点续流的能力"}},[t._v("#")]),t._v(" 3.2 replayStream & 断点续流的能力")]),t._v(" "),s("h4",{attrs:{id:"为啥有-replaystream"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为啥有-replaystream"}},[t._v("#")]),t._v(" 为啥有 replayStream")]),t._v(" "),s("p",[t._v("更复杂的 AI 应用场景可能还需要更多能力比如：")]),t._v(" "),s("ul",[s("li",[t._v("AI 回答时可以暂停和恢复，类似播放歌曲那样")]),t._v(" "),s("li",[t._v("查看历史消息记录")]),t._v(" "),s("li",[t._v("AI 回答太慢了，我关了页面（网络波动、意外刷新、多端同步），但希望下次进入能看到完整结果。")])]),t._v(" "),s("p",[s("code",[t._v("replayStream")]),t._v("方法正是为解决这类问题设计")]),t._v(" "),s("h4",{attrs:{id:"demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#demo"}},[t._v("#")]),t._v(" demo")]),t._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"%E9%93%BE%E6%8E%A5%E5%BE%85%E8%A1%A5%E5%85%85"}},[t._v("演示前台 demo 页面")]),t._v("，")]),t._v(" "),s("li",[t._v("调用示例，和 createStream 一样，调用后也进入流式生命周期")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replayStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("msgId")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"点击的那一条的消息id"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onxxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同上个demo")]),t._v("\n")])])]),s("h4",{attrs:{id:"怎么续流的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#怎么续流的"}},[t._v("#")]),t._v(" 怎么续流的")]),t._v(" "),s("p",[t._v("replayStream 通过"),s("strong",[t._v("双重缓存机制")]),t._v("实现智能断点续流：\n"),s("img",{attrs:{src:a(300),alt:"续流"}})]),t._v(" "),s("ul",[s("li",[t._v("双重缓存策略")])]),t._v(" "),s("p",[s("strong",[t._v("本地缓存（localStorage）")]),t._v("：页面刷新、网络中断、实例销毁时，实时保存流式过程中的渲染数据和断点位置等关键信息\n"),s("strong",[t._v("服务端缓存")]),t._v("：持久化存储完整的流式数据帧，及时客户端断开，仍然保持接收 AI 数据")]),t._v(" "),s("ul",[s("li",[t._v("核心实现机制")])]),t._v(" "),s("p",[s("strong",[t._v("精确定位")]),t._v("：通过 "),s("code",[t._v("lastComponentChunkId")]),t._v(" 参数，服务端能够精确定位到中断前的最后一个有效数据帧位置\n"),s("strong",[t._v("智能续接")]),t._v("：服务端只传输缺失的数据部分，避免重复传输已接收的内容\n"),s("strong",[t._v("统一 API")]),t._v("：无论哪种续流场景，业务层都使用相同的 "),s("code",[t._v("replayStream()")]),t._v(" 方法，无需关心底层是继续流式还是展示历史数据")]),t._v(" "),s("p",[s("strong",[t._v("SDK 内部自动处理")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("自动判断消息状态（生成中/已完成/已失败）")]),t._v(" "),s("li",[t._v("自动选择恢复策略（localStorage vs 服务端）")]),t._v(" "),s("li",[t._v("自动处理续流参数（lastChunkId）")]),t._v(" "),s("li",[t._v("自动触发对应的生命周期回调")])]),t._v(" "),s("h4",{attrs:{id:"有什么价值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#有什么价值"}},[t._v("#")]),t._v(" 有什么价值")]),t._v(" "),s("ul",[s("li",[t._v("开发提效：业务方不需要维护复杂的「中断判断 + 重建 UI」逻辑，无论记录是否完整，开发者都只需要和 createStream 一样 onUpdate 就行；")]),t._v(" "),s("li",[t._v("用户体验提升：刷新 / 崩溃 / 切端场景依然保证「能看到完整回答」；")])]),t._v(" "),s("h3",{attrs:{id:"_3-3-sdk-中的其他-api-和能力"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-sdk-中的其他-api-和能力"}},[t._v("#")]),t._v(" 3.3 sdk 中的其他 API 和能力")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("准入控制"),s("br"),t._v("\n通过"),s("code",[t._v("getAccessToken")]),t._v(" 支持实验和切流，自动刷新失效凭证，有效控制 AI 功能开放范围。")])]),t._v(" "),s("li",[s("p",[t._v("防抖更新"),s("br"),t._v("\n可配置的节流机制"),s("code",[t._v("new Stream({throttleUpdate: 300})")]),t._v("，合并高频数据帧更新，减轻业务 update 压力，减少性能损耗。")])]),t._v(" "),s("li",[s("p",[t._v("错误分层"),s("br"),t._v(" "),s("img",{attrs:{src:a(301),alt:"错误处理图"}}),t._v("\n五级精细化错误处理（网络/MTop 网关/布局/数据/渲染），通过完整的错误传播链管理体系，覆盖 12 种核心异常场景。基于精准定位技术（错误层级+位置溯源）与自愈式处理机制，实现差异化恢复策略，确保业务流畅度。")])])]),t._v(" "),s("ul",[s("li",[t._v("监控体系")])]),t._v(" "),s("p",[s("strong",[t._v("通过分层抽象将复杂流式交互标准化，使业务开发聚焦核心逻辑，将稳定性、性能、体验保障下沉至 SDK 层实现。")])]),t._v(" "),s("h2",{attrs:{id:"_4-规划"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-规划"}},[t._v("#")]),t._v(" 4.规划")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("动态 UI 组合")]),t._v("：\n"),s("ul",[s("li",[t._v("AI 驱动 UI 组件动态编排")]),t._v(" "),s("li",[t._v("基于场景的自动布局优化")]),t._v(" "),s("li",[t._v("个性化 UI 生成")])])]),t._v(" "),s("li",[s("strong",[t._v("自然语言搭建")]),t._v("：\n"),s("ul",[s("li",[t._v('"创建商品推荐页，包含分类过滤和热销排序"')]),t._v(" "),s("li",[t._v("对话式界面配置")]),t._v(" "),s("li",[t._v("AI 辅助设计建议")])])])]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("传统 AI 开发痛点")]),t._v(" "),s("th",[t._v("mui 的解决思路")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("流式数据难处理（渐进式返回）")]),t._v(" "),s("td",[t._v("分层数据协议 + 生命周期钩子（onLayout/onUpdate）")])]),t._v(" "),s("tr",[s("td",[t._v("数据结构复杂（原始 Markdown）")]),t._v(" "),s("td",[t._v("结构化 UI 描述 → 动态渲染组件")])]),t._v(" "),s("tr",[s("td",[t._v("能力复用成本高")]),t._v(" "),s("td",[t._v("微模块组件体系 + 智能编排引擎")])]),t._v(" "),s("tr",[s("td",[t._v("快速搭建 Copilot 困难")]),t._v(" "),s("td",[t._v("支持 SDK 接入 + 0 代码搭建双模式")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);