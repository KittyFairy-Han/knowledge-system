# vite



## vite 热更新原理

1. Vite 本地启动时会创建一个 WebSocket 连接，同时去监听本地的文件变化
2. 当用户修改了本地的文件时，WebSocket 的服务端会拿到变化的文件的 ID 或者其他标识，并推送给客户端
3. 客户端获取到变化的文件信息之后，便去请求最新的文件并刷新页面

## 考点

### 为什么不同环境不同工具

基于 esbuild 和 rollup   
- 开发时，更追求快速构建。
- 生成时，更追求运行快，那么构建的包就得小。
Vite 选择在不同环境中使用不同的工具，是为了在开发效率和生产效率之间找到一个平衡。sbuild 的快速编译是以牺牲一些代码优化为代价的，因此，esbuild 生成的代码可能不如其他工具生成的代码那么小或者那么高效。Rollup 是一个非常强大的打包工具，它对 ES Modules 的支持非常好，可以有效地实现 tree-shaking，生成更小的代码。因此，Vite 在生产环境中选择使用 Rollup 进行打包和优化。

### 开发环境是 esm，如何处理 commonjs

esbuild 的 transformer


### 生产环境用rollup，对代码进行了怎样的转换

