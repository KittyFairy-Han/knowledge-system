<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VuePress</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="image/logo.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/knowledge-system/assets/css/0.styles.c0d58452.css" as="style"><link rel="preload" href="/knowledge-system/assets/js/app.968bb918.js" as="script"><link rel="preload" href="/knowledge-system/assets/js/2.da57d09e.js" as="script"><link rel="preload" href="/knowledge-system/assets/js/51.b6751481.js" as="script"><link rel="prefetch" href="/knowledge-system/assets/js/10.a31a9a58.js"><link rel="prefetch" href="/knowledge-system/assets/js/11.97dedaed.js"><link rel="prefetch" href="/knowledge-system/assets/js/12.dc54aa45.js"><link rel="prefetch" href="/knowledge-system/assets/js/13.e9000f3e.js"><link rel="prefetch" href="/knowledge-system/assets/js/14.60aede8c.js"><link rel="prefetch" href="/knowledge-system/assets/js/15.7b476b96.js"><link rel="prefetch" href="/knowledge-system/assets/js/16.d2a1d293.js"><link rel="prefetch" href="/knowledge-system/assets/js/17.0fa78f13.js"><link rel="prefetch" href="/knowledge-system/assets/js/18.c372cf41.js"><link rel="prefetch" href="/knowledge-system/assets/js/19.f605066a.js"><link rel="prefetch" href="/knowledge-system/assets/js/20.b1aab789.js"><link rel="prefetch" href="/knowledge-system/assets/js/21.e783a26a.js"><link rel="prefetch" href="/knowledge-system/assets/js/22.63aedba0.js"><link rel="prefetch" href="/knowledge-system/assets/js/23.4e1be8c2.js"><link rel="prefetch" href="/knowledge-system/assets/js/24.9fe4af2d.js"><link rel="prefetch" href="/knowledge-system/assets/js/25.3300f456.js"><link rel="prefetch" href="/knowledge-system/assets/js/26.b1f95f74.js"><link rel="prefetch" href="/knowledge-system/assets/js/27.7bcfcda9.js"><link rel="prefetch" href="/knowledge-system/assets/js/28.ac343418.js"><link rel="prefetch" href="/knowledge-system/assets/js/29.518027d7.js"><link rel="prefetch" href="/knowledge-system/assets/js/3.d5ec6342.js"><link rel="prefetch" href="/knowledge-system/assets/js/30.48446a89.js"><link rel="prefetch" href="/knowledge-system/assets/js/31.09797cff.js"><link rel="prefetch" href="/knowledge-system/assets/js/32.96b38834.js"><link rel="prefetch" href="/knowledge-system/assets/js/33.817ce8f0.js"><link rel="prefetch" href="/knowledge-system/assets/js/34.7db0850f.js"><link rel="prefetch" href="/knowledge-system/assets/js/35.d5577c25.js"><link rel="prefetch" href="/knowledge-system/assets/js/36.77a4a183.js"><link rel="prefetch" href="/knowledge-system/assets/js/37.ade41975.js"><link rel="prefetch" href="/knowledge-system/assets/js/38.97c2f043.js"><link rel="prefetch" href="/knowledge-system/assets/js/39.15341ae1.js"><link rel="prefetch" href="/knowledge-system/assets/js/4.dda371ea.js"><link rel="prefetch" href="/knowledge-system/assets/js/40.20ac1926.js"><link rel="prefetch" href="/knowledge-system/assets/js/41.517c6fbb.js"><link rel="prefetch" href="/knowledge-system/assets/js/42.9e6cfe27.js"><link rel="prefetch" href="/knowledge-system/assets/js/43.694936d4.js"><link rel="prefetch" href="/knowledge-system/assets/js/44.55a6ea68.js"><link rel="prefetch" href="/knowledge-system/assets/js/45.1ba1df2a.js"><link rel="prefetch" href="/knowledge-system/assets/js/46.f293876c.js"><link rel="prefetch" href="/knowledge-system/assets/js/47.4e6dfed8.js"><link rel="prefetch" href="/knowledge-system/assets/js/48.7c309623.js"><link rel="prefetch" href="/knowledge-system/assets/js/49.4b448808.js"><link rel="prefetch" href="/knowledge-system/assets/js/5.9e0195bc.js"><link rel="prefetch" href="/knowledge-system/assets/js/50.e7d38144.js"><link rel="prefetch" href="/knowledge-system/assets/js/52.90b84751.js"><link rel="prefetch" href="/knowledge-system/assets/js/53.2d8bed66.js"><link rel="prefetch" href="/knowledge-system/assets/js/54.51bd314c.js"><link rel="prefetch" href="/knowledge-system/assets/js/6.d09cb291.js"><link rel="prefetch" href="/knowledge-system/assets/js/7.6ac0e941.js"><link rel="prefetch" href="/knowledge-system/assets/js/8.61debe6c.js"><link rel="prefetch" href="/knowledge-system/assets/js/9.757d5acc.js">
    <link rel="stylesheet" href="/knowledge-system/assets/css/0.styles.c0d58452.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/knowledge-system/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/knowledge-system/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/knowledge-system/CSS/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/knowledge-system/JS/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/knowledge-system/broswer/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/knowledge-system/engineering/" class="nav-link router-link-active">
  工程化
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/knowledge-system/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/knowledge-system/CSS/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/knowledge-system/JS/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/knowledge-system/broswer/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/knowledge-system/engineering/" class="nav-link router-link-active">
  工程化
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge-system/engineering/Vue/use.html" class="sidebar-link">/engineering/Vue/use.html</a></li><li><a href="/knowledge-system/engineering/Vue/principle.html" class="sidebar-link">/engineering/Vue/principle.html</a></li><li><a href="/knowledge-system/engineering/Vue/Vue3.html" class="sidebar-link">/engineering/Vue/Vue3.html</a></li></ul></section></li><li><a href="/knowledge-system/engineering/vdom/" class="sidebar-link">vdom</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>webpack</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge-system/engineering/webpack/" aria-current="page" class="sidebar-link">webpack 工作流程</a></li><li><a href="/knowledge-system/engineering/webpack/chunk.html" aria-current="page" class="active sidebar-link">/engineering/webpack/chunk.html</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge-system/engineering/webpack/chunk.html#chunk-来源" class="sidebar-link">chunk 来源</a></li><li class="sidebar-sub-header"><a href="/knowledge-system/engineering/webpack/chunk.html#方案比较" class="sidebar-link">方案比较</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge-system/engineering/webpack/chunk.html#import-例子" class="sidebar-link">import() 例子</a></li><li class="sidebar-sub-header"><a href="/knowledge-system/engineering/webpack/chunk.html#配置-optimization-splitchunk-cachegroup-例子" class="sidebar-link">配置 optimization.splitchunk.cacheGroup 例子</a></li><li class="sidebar-sub-header"><a href="/knowledge-system/engineering/webpack/chunk.html#比较" class="sidebar-link">比较</a></li></ul></li></ul></li><li><a href="/knowledge-system/engineering/webpack/SPA-MPA-MB.html" class="sidebar-link">/engineering/webpack/SPA-MPA-MB.html</a></li><li><a href="/knowledge-system/engineering/webpack/optimization.html" class="sidebar-link">/engineering/webpack/optimization.html</a></li><li><a href="/knowledge-system/engineering/webpack/app-demo.html" class="sidebar-link">/engineering/webpack/app-demo.html</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack-chunk"><a href="#webpack-chunk" class="header-anchor">#</a> webpack chunk</h1> <h2 id="chunk-来源"><a href="#chunk-来源" class="header-anchor">#</a> chunk 来源</h2> <ol><li>entry 入口</li> <li>import() 异步加载</li> <li>webpack 配置中的 optimization.splitchunk.cacheGroup 选项</li></ol> <h4 id="在默认的配置下-optimization-splitchunk-cachegroup"><a href="#在默认的配置下-optimization-splitchunk-cachegroup" class="header-anchor">#</a> 在默认的配置下 optimization.splitchunk.cacheGroup</h4> <ul><li>在异步形成的 chunk 中，引用 node_modules 中的代码会产生一个 chunk、</li> <li>在异步形成的 chunk 中，有公共引用的代码会单独抽出产生一个 chunk
<blockquote><p>注意！ import 是完全静态的（不能使用判断语句、不能使用变量），不会产生独立的 chunk。require 虽然可以动态加载（用 if else 语句控制动态加载、或者直接用变量控制动态加载）, 但是 require 并不会产生一个独立 chunk。import、require 的代码模块会合并到 entry 产生的 chunk 中。具体说明如下：</p></blockquote></li></ul> <h4 id="对-require-的解释"><a href="#对-require-的解释" class="header-anchor">#</a> 对 require 的解释</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// pages/demo/home/main.js</span>
<span class="token comment">// 根据客户端传参 params.skin 就是主题关键字</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">../../skin/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span>skin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/index.less</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>编译后的代码输出在一个 css 文件中。具体流程是：main.js 作为多页应用的一个入口，编译后形成一个 chunk,chunk 中包含了 main.js 引入的所有模块(所有以 import、require方式引入的模块)，样式代码编译后就在 这个 chunk(假设叫 entry-js-chunk) 中。然后，把 chunk 中的所有样式代码都抽离出来形成一个单独的 chunk(假设叫 css-chunk-from-js)。最后entry-js-chunk和css-chunk-from-js分别输入对应的js和css文件。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.demo-home-root</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #08ff70<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 5px solid #90ee90<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.demo-home-root:hover</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #e6941a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* ==========以上是绿色主题生成的代码======== */</span>
<span class="token comment">/* ==========以下是蓝色主题生成的代码======== */</span>
<span class="token selector">.demo-home-root</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #1a68c2<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 5px solid #87ceeb<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.demo-home-root:hover</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #e3e61a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>最后两套样式都会合并到一个文件，弊端一，如果皮肤样式有很多套，并且根据需求每次只使用一套，请求文件的体积过大，且大部分属于没有用到的样式。弊端二，样式发生了覆盖，除了最后一份主题，其他的主题永远不会生效，并没有办法动态的加载某一套主题。</p> <h2 id="方案比较"><a href="#方案比较" class="header-anchor">#</a> 方案比较</h2> <h3 id="import-例子"><a href="#import-例子" class="header-anchor">#</a> import() 例子</h3> <h4 id="写法"><a href="#写法" class="header-anchor">#</a> 写法</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// pages/demo/home/client-call.js</span>
<span class="token keyword">function</span> <span class="token function">setSkin</span><span class="token punctuation">(</span><span class="token parameter">skin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* webpackChunkName: &quot;global-themes&quot; */</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">../../skin/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>skin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/index.less</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用魔法注释为chunk命名,这样打包出来的文件名就是global-themes0、global-themes1、...</span>
</code></pre></div><h4 id="打包后两个皮肤文件分别为-global-themes0-css-绿色主题对应的-css-、global-themes1-css-蓝色主题对应的-css"><a href="#打包后两个皮肤文件分别为-global-themes0-css-绿色主题对应的-css-、global-themes1-css-蓝色主题对应的-css" class="header-anchor">#</a> 打包后两个皮肤文件分别为 global-themes0.css(绿色主题对应的 css)、global-themes1.css (蓝色主题对应的 css)</h4> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* global-themes0.css 绿色主题对应的css */</span>
<span class="token selector">.demo-home-root</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #08ff70<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 5px solid #90ee90<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.demo-home-root:hover</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #e6941a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* global-themes1.css 蓝色主题对应的css */</span>
<span class="token selector">.demo-home-root</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #1a68c2<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 5px solid #87ceeb<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.demo-home-root:hover</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #e3e61a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>?这里有个不完美的地方，魔法注释怎么使用变量，使得打包后的皮肤文件分别为 global-themes-green.css、global-themes-blue.css</p></blockquote> <h4 id="在入口-html-中引用的方式"><a href="#在入口-html-中引用的方式" class="header-anchor">#</a> 在入口 html 中引用的方式</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>assets/css/global-themes0.css</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>prefetch</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>assets/css/global-themes1.css</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>prefetch</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>分成两个包后，html 初始化时，本身时没有引入主题样式的，客户端与 web 通信（即调用 window.clientCallJs)，然后浏览器去获取对应的 css 文件内容。</p> <h3 id="配置-optimization-splitchunk-cachegroup-例子"><a href="#配置-optimization-splitchunk-cachegroup-例子" class="header-anchor">#</a> 配置 optimization.splitchunk.cacheGroup 例子</h3> <h4 id="写法-2"><a href="#写法-2" class="header-anchor">#</a> 写法</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// pages/demo/home/client-call.js</span>
<span class="token keyword">function</span> <span class="token function">setSkin</span><span class="token punctuation">(</span><span class="token parameter">skin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">require</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">../../skin/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>skin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/index.less</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// vue.config.js</span>
<span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">webpackConfig</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  webpackConfig<span class="token punctuation">.</span>optimization<span class="token punctuation">.</span><span class="token function">splitChunks</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    cacheGroups<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> skinsPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src/skin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> skinKeyList <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>skinsPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
      skinKeyList <span class="token operator">=</span> skinKeyList<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item <span class="token operator">!=</span> <span class="token string">&quot;style&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> skinKey <span class="token keyword">of</span> skinKeyList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">[</span>skinKey<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&quot;global-themes-&quot;</span> <span class="token operator">+</span> skinKey<span class="token punctuation">,</span> <span class="token comment">//最后形成chunk的名称</span>
          chunks<span class="token operator">:</span> <span class="token string">&quot;initial&quot;</span><span class="token punctuation">,</span> <span class="token comment">//对entry产生的chunk继续分割</span>
          test<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[\\\\/]src[\\\\/]skin[\\\\/]</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>skinKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">[\\\\/]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//匹配对应的目录</span>
          minSize<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//不限制块的大小，只要满足匹配就独立出chunk</span>
          reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 如果当前的 chunk 已被从 split 出来，那么将会直接复用这个 chunk 而不是重新创建一个</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="打包后两个皮肤文件分别为-global-themes-blue-css、global-themes-green-css"><a href="#打包后两个皮肤文件分别为-global-themes-blue-css、global-themes-green-css" class="header-anchor">#</a> 打包后两个皮肤文件分别为 global-themes-blue.css、global-themes-green.css</h4> <blockquote><p>文件内容与使用 import 方式打包出来的一样</p></blockquote> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* global-themes-green.css */</span>
<span class="token selector">.demo-home-root</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #08ff70<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 5px solid #90ee90<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.demo-home-root:hover</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #e6941a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* global-themes-blue.css */</span>
<span class="token selector">.demo-home-root</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #1a68c2<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 5px solid #87ceeb<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.demo-home-root:hover</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #e3e61a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="html-中的引用方式"><a href="#html-中的引用方式" class="header-anchor">#</a> html 中的引用方式</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>assets/css/global-themes-blue.css</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>preload</span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>style</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>assets/css/global-themes-green.css</span>
<span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>preload</span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="比较"><a href="#比较" class="header-anchor">#</a> 比较</h3> <p>这两种方案打包后的差别就在于 html 引用时 rel 属性的值，一个是 prefetch(import 方案)一个是 preload(splitchunks 方案)。他们的差别如下</p> <ul><li>preload chunk 会在父 chunk 加载时,以并行方式开始加载。也就是说在加载 主入口形成的 chunk 的同时,浏览器同时请求了两套皮肤文件的内容。</li> <li>prefetch chunk 会用于未来的某个时刻,在浏览器闲置时下载。也就是说在加载 主入口形成的 chunk 的时候,浏览器没有请求两套皮肤文件的内容，当 setSkin 方法调用时,才去请求某一个皮肤文件的内容。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/knowledge-system/engineering/webpack/" class="prev router-link-active">
        webpack 工作流程
      </a></span> <span class="next"><a href="/knowledge-system/engineering/webpack/SPA-MPA-MB.html">
        /engineering/webpack/SPA-MPA-MB.html
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/knowledge-system/assets/js/app.968bb918.js" defer></script><script src="/knowledge-system/assets/js/2.da57d09e.js" defer></script><script src="/knowledge-system/assets/js/51.b6751481.js" defer></script>
  </body>
</html>
