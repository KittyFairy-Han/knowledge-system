<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VuePress</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="image/logo.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/knowledge-system/assets/css/0.styles.bb9d180c.css" as="style"><link rel="preload" href="/knowledge-system/assets/js/app.3f30ee57.js" as="script"><link rel="preload" href="/knowledge-system/assets/js/2.1e2e5af0.js" as="script"><link rel="preload" href="/knowledge-system/assets/js/84.89b124f1.js" as="script"><link rel="prefetch" href="/knowledge-system/assets/js/10.83b8c0e1.js"><link rel="prefetch" href="/knowledge-system/assets/js/11.045bd3a3.js"><link rel="prefetch" href="/knowledge-system/assets/js/12.97bcf960.js"><link rel="prefetch" href="/knowledge-system/assets/js/13.bcb03fa2.js"><link rel="prefetch" href="/knowledge-system/assets/js/14.00ea3b8a.js"><link rel="prefetch" href="/knowledge-system/assets/js/15.39412c28.js"><link rel="prefetch" href="/knowledge-system/assets/js/16.8a5a354b.js"><link rel="prefetch" href="/knowledge-system/assets/js/17.d8dc25df.js"><link rel="prefetch" href="/knowledge-system/assets/js/18.70b99051.js"><link rel="prefetch" href="/knowledge-system/assets/js/19.f6d17ee0.js"><link rel="prefetch" href="/knowledge-system/assets/js/20.67c0def9.js"><link rel="prefetch" href="/knowledge-system/assets/js/21.cc3b5ad3.js"><link rel="prefetch" href="/knowledge-system/assets/js/22.de532c36.js"><link rel="prefetch" href="/knowledge-system/assets/js/23.3fc1899a.js"><link rel="prefetch" href="/knowledge-system/assets/js/24.0a93b35f.js"><link rel="prefetch" href="/knowledge-system/assets/js/25.4a50e71d.js"><link rel="prefetch" href="/knowledge-system/assets/js/26.96823b06.js"><link rel="prefetch" href="/knowledge-system/assets/js/27.25bdd59c.js"><link rel="prefetch" href="/knowledge-system/assets/js/28.c8be99d7.js"><link rel="prefetch" href="/knowledge-system/assets/js/29.d6fd4beb.js"><link rel="prefetch" href="/knowledge-system/assets/js/3.b58b8bc9.js"><link rel="prefetch" href="/knowledge-system/assets/js/30.27340547.js"><link rel="prefetch" href="/knowledge-system/assets/js/31.07a7065d.js"><link rel="prefetch" href="/knowledge-system/assets/js/32.97809239.js"><link rel="prefetch" href="/knowledge-system/assets/js/33.5e9b0afa.js"><link rel="prefetch" href="/knowledge-system/assets/js/34.baeb4fe7.js"><link rel="prefetch" href="/knowledge-system/assets/js/35.ba5aad26.js"><link rel="prefetch" href="/knowledge-system/assets/js/36.f674973f.js"><link rel="prefetch" href="/knowledge-system/assets/js/37.2ca6ce0e.js"><link rel="prefetch" href="/knowledge-system/assets/js/38.633749a3.js"><link rel="prefetch" href="/knowledge-system/assets/js/39.ac6cb7f8.js"><link rel="prefetch" href="/knowledge-system/assets/js/4.189e7355.js"><link rel="prefetch" href="/knowledge-system/assets/js/40.b462c041.js"><link rel="prefetch" href="/knowledge-system/assets/js/41.d19713dd.js"><link rel="prefetch" href="/knowledge-system/assets/js/42.cde09c06.js"><link rel="prefetch" href="/knowledge-system/assets/js/43.a8789389.js"><link rel="prefetch" href="/knowledge-system/assets/js/44.b195b929.js"><link rel="prefetch" href="/knowledge-system/assets/js/45.64bc5157.js"><link rel="prefetch" href="/knowledge-system/assets/js/46.2b25387f.js"><link rel="prefetch" href="/knowledge-system/assets/js/47.65b18197.js"><link rel="prefetch" href="/knowledge-system/assets/js/48.b124037e.js"><link rel="prefetch" href="/knowledge-system/assets/js/49.8cc09337.js"><link rel="prefetch" href="/knowledge-system/assets/js/5.80a102c2.js"><link rel="prefetch" href="/knowledge-system/assets/js/50.a0ea1b99.js"><link rel="prefetch" href="/knowledge-system/assets/js/51.6e25ce67.js"><link rel="prefetch" href="/knowledge-system/assets/js/52.bd1249fa.js"><link rel="prefetch" href="/knowledge-system/assets/js/53.c95baf1a.js"><link rel="prefetch" href="/knowledge-system/assets/js/54.98cc87eb.js"><link rel="prefetch" href="/knowledge-system/assets/js/55.cf73dd3a.js"><link rel="prefetch" href="/knowledge-system/assets/js/56.7ba79579.js"><link rel="prefetch" href="/knowledge-system/assets/js/57.1ded6bd2.js"><link rel="prefetch" href="/knowledge-system/assets/js/58.f4e4bea0.js"><link rel="prefetch" href="/knowledge-system/assets/js/59.b1b2d7a8.js"><link rel="prefetch" href="/knowledge-system/assets/js/6.aceb1378.js"><link rel="prefetch" href="/knowledge-system/assets/js/60.de8ca4e2.js"><link rel="prefetch" href="/knowledge-system/assets/js/61.8a3ad4c5.js"><link rel="prefetch" href="/knowledge-system/assets/js/62.9bd79808.js"><link rel="prefetch" href="/knowledge-system/assets/js/63.bb6801ba.js"><link rel="prefetch" href="/knowledge-system/assets/js/64.a7df4753.js"><link rel="prefetch" href="/knowledge-system/assets/js/65.653d7658.js"><link rel="prefetch" href="/knowledge-system/assets/js/66.646278b2.js"><link rel="prefetch" href="/knowledge-system/assets/js/67.c66dbba0.js"><link rel="prefetch" href="/knowledge-system/assets/js/68.659ecec8.js"><link rel="prefetch" href="/knowledge-system/assets/js/69.4345b1e6.js"><link rel="prefetch" href="/knowledge-system/assets/js/7.940087ca.js"><link rel="prefetch" href="/knowledge-system/assets/js/70.8841fceb.js"><link rel="prefetch" href="/knowledge-system/assets/js/71.86c0d6e3.js"><link rel="prefetch" href="/knowledge-system/assets/js/72.09d929ca.js"><link rel="prefetch" href="/knowledge-system/assets/js/73.8dfd11d4.js"><link rel="prefetch" href="/knowledge-system/assets/js/74.0435c543.js"><link rel="prefetch" href="/knowledge-system/assets/js/75.365f1fe5.js"><link rel="prefetch" href="/knowledge-system/assets/js/76.179b6773.js"><link rel="prefetch" href="/knowledge-system/assets/js/77.7624563f.js"><link rel="prefetch" href="/knowledge-system/assets/js/78.cd90ba9a.js"><link rel="prefetch" href="/knowledge-system/assets/js/79.dc2b9603.js"><link rel="prefetch" href="/knowledge-system/assets/js/8.bb821eb8.js"><link rel="prefetch" href="/knowledge-system/assets/js/80.0627d816.js"><link rel="prefetch" href="/knowledge-system/assets/js/81.69905481.js"><link rel="prefetch" href="/knowledge-system/assets/js/82.230c2c48.js"><link rel="prefetch" href="/knowledge-system/assets/js/83.9d758fe5.js"><link rel="prefetch" href="/knowledge-system/assets/js/85.3a9ca956.js"><link rel="prefetch" href="/knowledge-system/assets/js/86.e895f8b4.js"><link rel="prefetch" href="/knowledge-system/assets/js/87.4e7a893c.js"><link rel="prefetch" href="/knowledge-system/assets/js/88.a2c47419.js"><link rel="prefetch" href="/knowledge-system/assets/js/89.e0b9407c.js"><link rel="prefetch" href="/knowledge-system/assets/js/9.1b6ddf34.js"><link rel="prefetch" href="/knowledge-system/assets/js/90.fefc2a4b.js">
    <link rel="stylesheet" href="/knowledge-system/assets/css/0.styles.bb9d180c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/knowledge-system/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/knowledge-system/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/knowledge-system/CSS/layout/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/knowledge-system/JS/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/knowledge-system/React/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/knowledge-system/Vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/knowledge-system/broswer/work/" class="nav-link">
  æµè§ˆå™¨
</a></div><div class="nav-item"><a href="/knowledge-system/engineering/" class="nav-link">
  å·¥ç¨‹åŒ–
</a></div><div class="nav-item"><a href="/knowledge-system/scene/lottieUsage/" class="nav-link">
  å…¶ä»–
</a></div><div class="nav-item"><a href="/knowledge-system/web3d/" class="nav-link">
  web3d
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/knowledge-system/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/knowledge-system/CSS/layout/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/knowledge-system/JS/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/knowledge-system/React/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/knowledge-system/Vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/knowledge-system/broswer/work/" class="nav-link">
  æµè§ˆå™¨
</a></div><div class="nav-item"><a href="/knowledge-system/engineering/" class="nav-link">
  å·¥ç¨‹åŒ–
</a></div><div class="nav-item"><a href="/knowledge-system/scene/lottieUsage/" class="nav-link">
  å…¶ä»–
</a></div><div class="nav-item"><a href="/knowledge-system/web3d/" class="nav-link">
  web3d
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/knowledge-system/scene/lottieUsage.html" class="sidebar-link">lottieçš„åº”ç”¨åœºæ™¯</a></li><li><a href="/knowledge-system/scene/screenshoots.html" class="sidebar-link">å‰ç«¯æˆªå±æ–¹æ¡ˆ</a></li><li><a href="/knowledge-system/scene/modelViewer.html" class="sidebar-link">modelViewer</a></li><li><a href="/knowledge-system/scene/cli.html" aria-current="page" class="active sidebar-link">è„šæ‰‹æ¶å·¥å…·</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge-system/scene/cli.html#ç®€ä»‹" class="sidebar-link">ç®€ä»‹</a></li><li class="sidebar-sub-header"><a href="/knowledge-system/scene/cli.html#ä»£ç æµç¨‹" class="sidebar-link">ä»£ç æµç¨‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge-system/scene/cli.html#å…ˆçœ‹ä¸€çœ¼ä¾èµ–" class="sidebar-link">å…ˆçœ‹ä¸€çœ¼ä¾èµ–</a></li><li class="sidebar-sub-header"><a href="/knowledge-system/scene/cli.html#å†çœ‹ä»£ç " class="sidebar-link">å†çœ‹ä»£ç </a></li><li class="sidebar-sub-header"><a href="/knowledge-system/scene/cli.html#åŸæ¥è¿™ä¹ˆç®€å•-â•" class="sidebar-link">åŸæ¥è¿™ä¹ˆç®€å• â•</a></li></ul></li></ul></li><li><a href="/knowledge-system/scene/vscode-extension.html" class="sidebar-link">vscodeæ’ä»¶</a></li><li><a href="/knowledge-system/scene/pay.html" class="sidebar-link">æ”¯ä»˜</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>è§£é”æ–°æŠ€èƒ½ï½å¼€å‘ä¸€ä¸ªè„šæ‰‹æ¶å·¥å…·<br>
è¯´æ¥æƒ­æ„§ï¼Œä½œä¸ºä¸€ä¸ªä»ä¸š 4 å¹´çš„å‰ç«¯ï¼ŒNode.js è¿˜æ˜¯é›¶åŸºç¡€çš„çŠ¶æ€ã€‚åˆšå¥½ä¸šåŠ¡ä¸­éœ€è¦å¼€å‘ä¸€ä¸ªè„šæ‰‹æ¶å·¥å…·ï¼Œæ‰€ä»¥å°±ä»ä¸€ä¸ªç®€å•çš„è„šæ‰‹æ¶å·¥å…·å¼€å§‹å§ã€‚</p> <h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="header-anchor">#</a> ç®€ä»‹</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># å®‰è£…</span>
<span class="token function">npm</span> i <span class="token parameter variable">-g</span> @kittyfairy/cli
<span class="token comment"># å¯åŠ¨</span>
kf-cli
? ğŸ§™ è¯·é€‰æ‹©æ¨¡æ¿ <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
<span class="token comment"># ... çœç•¥ ...</span>
? ğŸ”— å…³è”è¿œç¨‹ä»“åº“åœ°å€ï¼Ÿï¼ˆå¯é€‰ï¼‰
<span class="token comment"># ... çœç•¥ ...</span>
<span class="token operator">&gt;</span> <span class="token function">git</span> clone <span class="token punctuation">..</span>.
<span class="token operator">&gt;</span> âœ…  å®Œæˆâ•

</code></pre></div><p>ä»ä½¿ç”¨æµç¨‹ä¸Šçœ‹ï¼ŒåŠŸèƒ½ç‚¹å°±è¿™å‡ ä¸ªï¼š</p> <ul><li>å¯ä»¥åœ¨å¤šç§æ¨¡æ¿ä¸­é€‰æ‹©ä¸€ä¸ª</li> <li>æ‹‰å–è¿œç¨‹æ¨¡æ¿ä»£ç ï¼ˆå‰”é™¤ git ä¿¡æ¯ã€ä¿®æ”¹ packge.jsonï¼‰</li> <li>å…³è”æ–°çš„ git ä»“åº“</li></ul> <p>ğŸ”” tipsï¼šå‘å¸ƒåˆ° npm çš„æµç¨‹å°±ä¸è¯´äº†ï¼Œæ¥ä¸‹æ¥ä¸»è¦è®²ä¸€ä¸‹ä»£ç å®ç°ã€‚</p> <h2 id="ä»£ç æµç¨‹"><a href="#ä»£ç æµç¨‹" class="header-anchor">#</a> ä»£ç æµç¨‹</h2> <p><img src="https://raw.githubusercontent.com/KittyFairy-Han/knowledge-system/af98c98b50297e7389886bd54557f53a56169d0f/docs/scene/static/cli_1.png" alt="æ ¸å¿ƒæµç¨‹"><br>
ä¸å¤šè¯´äº† â• æ‘†ä»£ç å§ ï½</p> <h3 id="å…ˆçœ‹ä¸€çœ¼ä¾èµ–"><a href="#å…ˆçœ‹ä¸€çœ¼ä¾èµ–" class="header-anchor">#</a> å…ˆçœ‹ä¸€çœ¼ä¾èµ–</h3> <ul><li>path Node.js å†…ç½®æ¨¡å—ï¼Œæä¾›äº†ä¸€äº›ç”¨äºå¤„ç†æ–‡ä»¶è·¯å¾„çš„å°å·¥å…·</li> <li>fs Node.js æä¾›ä¸€ç»„ç±»ä¼¼ UNIXï¼ˆPOSIXï¼‰æ ‡å‡†çš„æ–‡ä»¶æ“ä½œ API</li> <li>yargs-parser éå†…ç½®ï¼Œç”¨äºè§£æå‘½ä»¤è¡Œå‚æ•°</li> <li>chalk éå†…ç½®ï¼Œç”¨äºç¾åŒ–ç»ˆç«¯æ‰“å°çš„å†…å®¹</li> <li>prettier éå†…ç½®ï¼Œç”¨äºæ ¼å¼åŒ–ä»£ç </li> <li><a href="https://yeoman.io/learning/" target="_blank" rel="noopener noreferrer">yeoman-xxx<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> éå†…ç½®ï¼Œç”¨äºåˆ›å»ºè„šæ‰‹æ¶å·¥å…·çš„ä¾èµ–</li></ul> <h3 id="å†çœ‹ä»£ç "><a href="#å†çœ‹ä»£ç " class="header-anchor">#</a> å†çœ‹ä»£ç </h3> <p>ğŸ”” ä¸€è¡Œä¸€æ³¨ï¼Œçˆ±äº†çˆ±äº†</p> <ul><li>cli.js å…¥å£æ–‡ä»¶<br>
node ç¯å¢ƒæ£€æŸ¥å’Œå‘½ä»¤è¡Œå‚æ•°æå–</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
#<span class="token operator">!</span><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env node <span class="token comment">//å‘Šè¯‰ç³»ç»Ÿè¿™æ˜¯ä¸€ä¸ª node ç¨‹åºï¼Œä½¿ç”¨ node æ¥æ‰§è¡Œå®ƒ</span>

<span class="token keyword">const</span> yParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yargs-parser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> semver <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'semver'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> chalk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chalk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> run <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./lib/run'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// node ç‰ˆæœ¬æ£€æŸ¥</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>semver<span class="token punctuation">.</span><span class="token function">satisfies</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>version<span class="token punctuation">,</span> <span class="token string">'&gt;= 8.0.0'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token string">'âœ˜ The generator will only work with Node v8.0.0 and up!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ============= æå–å‘½ä»¤è¡Œå‚æ•° =============</span>
<span class="token comment">//å‘½ä»¤è¡Œè¿è¡Œ node cli aaa bbb ccc --bar=0 --foo=1 åˆ™ args = {_:[ 'aaa', 'bbb', 'ccc' ], bar: 0, foo: 1}</span>
<span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token function">yParser</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> args<span class="token punctuation">.</span>_<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> args<span class="token punctuation">.</span>_<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span> <span class="token operator">=</span> args<span class="token punctuation">;</span>
<span class="token keyword">delete</span> args<span class="token punctuation">.</span>type<span class="token punctuation">;</span>

<span class="token comment">// ============= è¿è¡Œ =============</span>
<span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">,</span>type<span class="token punctuation">,</span>args<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//name ä¸ºé¡¹ç›®åç§°ï¼Œtype ä¸ºæ¨¡æ¿ç±»å‹ï¼Œargs ä¸ºå…¶ä»–å‚æ•°</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&gt; Generate failed</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre></div><ul><li>lib/run.js<br>
yeoman çš„ä¸€äº›å¥—è·¯ï¼Œä¸ç”¨ç»†ç©¶</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> mkdirp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mkdirp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> yeoman <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;yeoman-environment&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Generator <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./SimpleGenerator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> runGenerator <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> args <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> cwd <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// console.log(chalk.bgBlueBright(`name=: ${name}`));</span>
  <span class="token comment">// console.log(chalk.bgBlueBright(`type=: ${type}`));</span>
  <span class="token comment">// console.log(chalk.bgBlueBright(`args=: ${JSON.stringify(args)}`));</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mkdirp<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¦‚æœæä¾›äº†åç§°ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹</span>
      cwd <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>cwd<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ›´æ–°å½“å‰å·¥ä½œç›®å½•è·¯å¾„</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// yeoman æ˜¯ä¸€ä¸ªè„šæ‰‹æ¶å·¥å…· ï¼Œåé¢è¿™æ®µä»£ç å°±å½“å›ºå®šå†™æ³•å§ï¼Œä¸ç”¨ç»†çº </span>
    <span class="token keyword">const</span> env <span class="token operator">=</span> yeoman<span class="token punctuation">.</span><span class="token function">createEnv</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      cwd<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> generator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Generator</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token punctuation">,</span>
      type<span class="token punctuation">,</span>
      env<span class="token punctuation">,</span>
      <span class="token literal-property property">resolved</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;./SimpleGenerator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      args<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å¼€å§‹ä¾æ¬¡è°ƒç”¨æˆ‘ä»¬çš„ promptingã€writing æ–¹æ³•</span>
    generator<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;âœ¨ ä¸€åˆ‡å°±ç»ª&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰€æœ‰å·¥ä½œå®Œæˆå</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> runGenerator<span class="token punctuation">;</span>
</code></pre></div><ul><li>lib/SimpleGenerator.js<br>
æˆ‘ä»¬è¦å®ç°çš„å†…å®¹å‡ ä¹éƒ½åœ¨è¿™å„¿ ğŸ“Œ å•¦</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs-extra&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> chalk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;chalk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rimraf <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;rimraf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> prettier <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;prettier&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Generator <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;yeoman-generator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">gray</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ======== é¢„è®¾çš„æ¨¡æ¿ =========</span>
<span class="token keyword">const</span> tplUrlMap <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;vue-h5-tpl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git@github.com:KittyFairy-Han/vue-sell.git&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;angular-tpl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git@github.com:KittyFairy-Han/angular-hero.git&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;jquery-tpl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git@github.com:KittyFairy-Han/littleHdu.git&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;vue-echart-tpl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git@github.com:KittyFairy-Han/data-collection-visible.git&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ======== å‘½ä»¤è¡Œäº¤äº’æ—¶ï¼Œé€‰é¡¹ =========</span>
<span class="token keyword">const</span> tplChoices <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;vue-echart-tpl: åŸºäº echarts çš„ PC ç«¯é¡¹ç›®æ¨¡æ¿ï¼ŒåŒ…å«æ•°æ®å¯è§†åŒ–&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;vue-echart-tpl&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;vue-h5-tpl: åŸºäº vue çš„ç§»åŠ¨ç«¯ H5 é¡¹ç›®æ¨¡æ¿&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;vue-h5-tpl&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;angular-tpl: åŸºäº angular çš„ PC ç«¯é¡¹ç›®æ¨¡æ¿&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;angular-tpl&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;jquery-tpl: åŸºäº jquery çš„å¤æ—©é¡¹ç›®æ¨¡æ¿&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;jquery-tpl&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AntDesignProGenerator</span> <span class="token keyword">extends</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token operator">...</span>opts <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// opts = {env,resolved,args}</span>

    <span class="token keyword">super</span><span class="token punctuation">(</span>opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>opts <span class="token operator">=</span> opts<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">async</span> <span class="token function">prompting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// log(`ğŸªœ ç”Ÿæˆå™¨å‡†å¤‡ç»“æŸ å¼€å§‹ç•Œé¢äº¤äº’`);</span>
    <span class="token keyword">const</span> questions <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;tpl&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">choices</span><span class="token operator">:</span> tplChoices<span class="token punctuation">,</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;ğŸ§™ è¯·é€‰æ‹©æ¨¡æ¿&quot;</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token punctuation">,</span> <span class="token comment">// å¦‚æœå‘½ä»¤è¡Œå‚æ•°ä¸­æä¾›äº† typeï¼Œåˆ™ä½¿ç”¨è¯¥å€¼ä½œä¸ºé»˜è®¤å€¼</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">è¯·å¡«å†™é¡¹ç›®åç§°</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token comment">// å¦‚æœå‘½ä»¤è¡Œå‚æ•°ä¸­æä¾›äº† nameï¼Œåˆ™ä½¿ç”¨è¯¥å€¼ä½œä¸ºé»˜è®¤å€¼</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;remote&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ä½ é¡¹ç›®çš„è¿œç¨‹ä»“åº“åœ°å€ï¼Ÿï¼ˆå¯é€‰å¡«ï¼‰</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// è¿™ä¸¤è¡Œä»£ç çš„ç›®çš„æ˜¯é€šçŸ¥çˆ¶è¿›ç¨‹å½“å‰è¿›ç¨‹å·²ç»å‡†å¤‡å¥½è¿›è¡Œäº¤äº’ï¼Œæˆ–è€…å¯ä»¥å¼€å§‹æ¥å—æ¥è‡ªçˆ¶è¿›ç¨‹çš„æŒ‡ä»¤æˆ–æ¶ˆæ¯ã€‚</span>
    <span class="token comment">// è¿™ç§é€šä¿¡æœºåˆ¶åœ¨å‘½ä»¤è¡Œå·¥å…·å’Œå®ƒçš„å­è¿›ç¨‹ä¹‹é—´å¾ˆå¸¸è§ï¼Œç”¨äºæ§åˆ¶å‘½ä»¤è¡Œç•Œé¢çš„äº¤äº’è¡Œä¸ºã€‚</span>
    process<span class="token punctuation">.</span>send <span class="token operator">&amp;&amp;</span> process<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;prompt&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    process<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;prompt&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> answers <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span>questions<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>answers <span class="token operator">=</span> answers<span class="token punctuation">;</span>
    <span class="token comment">// log(`ğŸªœ ç•Œé¢äº¤äº’ç»“æŸ å‡†å¤‡æ‹‰å–æ¨¡æ¿`);</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">âš™ï¸ å‡†å¤‡å°±ç»ªï¼</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">writing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/*=== åˆ‡æ¢ç¯å¢ƒ */</span>
    <span class="token comment">// console.log(chalk.bgBlueBright(`answers=: ${JSON.stringify(this.answers)}`));</span>
    <span class="token keyword">const</span> projectName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>answers<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>opts<span class="token punctuation">.</span>env<span class="token punctuation">.</span>cwd<span class="token punctuation">;</span> <span class="token comment">//å¦‚æœç”¨æˆ·æä¾›äº†é¡¹ç›®åç§°ï¼Œå°±ä½¿ç”¨è¯¥åç§°ï¼›å¦åˆ™ä½¿ç”¨å½“å‰å·¥ä½œç›®å½•çš„åç§°ä½œä¸ºé¡¹ç›®åç§°ã€‚</span>
    <span class="token keyword">const</span> projectPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>projectName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å°†é¡¹ç›®åç§°è§£æä¸ºç»å¯¹è·¯å¾„ï¼Œå¾—åˆ°é¡¹ç›®çš„å®Œæ•´è·¯å¾„ã€‚</span>
    <span class="token keyword">const</span> projectRemote <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>answers<span class="token punctuation">.</span>remote<span class="token punctuation">;</span>
    <span class="token comment">// log('ğŸ“ å‡†å¤‡å†™å…¥æ–‡ä»¶åˆ°ï¼š', projectPath);</span>

    <span class="token comment">/** ä¸€äº›æ£€æŸ¥ */</span>
    <span class="token keyword">const</span> yoConfigPth <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>projectPath<span class="token punctuation">,</span> <span class="token string">&quot;.yo-repository&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>yoConfigPth<span class="token punctuation">)</span><span class="token punctuation">)</span> rimraf<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span>yoConfigPth<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ é™¤ .yo-repository</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>projectPath<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
      fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>projectPath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
      fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>projectPath<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ğŸ™ˆ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·åœ¨ç©ºæ–‡ä»¶å¤¹ä¸­ä½¿ç”¨&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">//æ£€æŸ¥é¡¹ç›®è·¯å¾„æ˜¯å¦ä¸ºç©º</span>

    <span class="token comment">/** æ‹‰ä»£ç  */</span>
    <span class="token keyword">const</span> githubUrl <span class="token operator">=</span> tplUrlMap<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>answers<span class="token punctuation">.</span>tpl<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> gitArgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">clone</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> githubUrl<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">--depth=1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> projectName<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//--depth=1 å‚æ•°æŒ‡å®šå…‹éš†ä»“åº“çš„æ·±åº¦ï¼Œåªè·å–æœ€è¿‘ä¸€æ¬¡æäº¤çš„å†…å®¹ï¼Œä»¥åŠ å¿«å…‹éš†é€Ÿåº¦ã€‚</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">spawnCommandSync</span><span class="token punctuation">(</span><span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span> gitArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ğŸšš clone æˆåŠŸï¼</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/** å¤„ç†æ–‡ä»¶ */</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> packageJsonPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>projectPath<span class="token punctuation">,</span> <span class="token string">&quot;package.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> pkg <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>packageJsonPath<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//package.json è¯»å–æˆä¸€ä¸ªå¯¹è±¡</span>
      <span class="token comment">// console.log(`ğŸ™ˆ ${JSON.stringify(pkg)}`);</span>
      pkg<span class="token punctuation">.</span>name <span class="token operator">=</span> projectName<span class="token punctuation">;</span> <span class="token comment">//ä¿®æ”¹ package.json ä¸­çš„å†…å®¹</span>
      pkg<span class="token punctuation">.</span>remote <span class="token operator">=</span> projectRemote<span class="token punctuation">;</span>
      fs<span class="token punctuation">.</span><span class="token function">writeJSONSync</span><span class="token punctuation">(</span>packageJsonPath<span class="token punctuation">,</span> pkg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> formattedCode <span class="token operator">=</span> prettier<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>
        fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>packageJsonPath<span class="token punctuation">,</span> <span class="token string">&quot;utf8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>packageJsonPath<span class="token punctuation">,</span> formattedCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ğŸ™ˆ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">yellow</span><span class="token punctuation">(</span><span class="token string">&quot;package.json ä¸å­˜åœ¨ï¼Œä»£ç æ¨¡æ¿å¯èƒ½å­˜åœ¨é—®é¢˜&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> gitFolderPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>projectPath<span class="token punctuation">,</span> <span class="token string">&quot;.git&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ é™¤æ•´ä¸ª .git ç›®å½•</span>
    fs<span class="token punctuation">.</span><span class="token function">removeSync</span><span class="token punctuation">(</span>gitFolderPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/** å…³è”æ–°çš„ git */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>projectRemote<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">spawnCommandSync</span><span class="token punctuation">(</span><span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;init&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">cwd</span><span class="token operator">:</span> projectPath <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">spawnCommandSync</span><span class="token punctuation">(</span><span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">cwd</span><span class="token operator">:</span> projectPath <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">spawnCommandSync</span><span class="token punctuation">(</span><span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;commit&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-m&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;init&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">cwd</span><span class="token operator">:</span> projectPath<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">spawnCommandSync</span><span class="token punctuation">(</span><span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;remote&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;origin&quot;</span><span class="token punctuation">,</span> projectRemote<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">cwd</span><span class="token operator">:</span> projectPath<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">spawnCommandSync</span><span class="token punctuation">(</span><span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;pull&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--rebase&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;origin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;main&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">cwd</span><span class="token operator">:</span> projectPath<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ğŸ”— git ä»“åº“å…³è”æˆåŠŸï¼è¯·åˆ·æ–° git å·¥å…·æŸ¥çœ‹æ˜¯å¦æœ‰å†²çªæ–‡ä»¶&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> AntDesignProGenerator<span class="token punctuation">;</span>
</code></pre></div><h3 id="åŸæ¥è¿™ä¹ˆç®€å•-â•"><a href="#åŸæ¥è¿™ä¹ˆç®€å•-â•" class="header-anchor">#</a> åŸæ¥è¿™ä¹ˆç®€å• â•</h3></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/knowledge-system/scene/modelViewer.html" class="prev">
        modelViewer
      </a></span> <span class="next"><a href="/knowledge-system/scene/vscode-extension.html">
        vscodeæ’ä»¶
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/knowledge-system/assets/js/app.3f30ee57.js" defer></script><script src="/knowledge-system/assets/js/2.1e2e5af0.js" defer></script><script src="/knowledge-system/assets/js/84.89b124f1.js" defer></script>
  </body>
</html>
