<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VuePress</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="image/logo.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/knowledge-system/assets/css/0.styles.bb9d180c.css" as="style"><link rel="preload" href="/knowledge-system/assets/js/app.3f30ee57.js" as="script"><link rel="preload" href="/knowledge-system/assets/js/2.1e2e5af0.js" as="script"><link rel="preload" href="/knowledge-system/assets/js/84.89b124f1.js" as="script"><link rel="prefetch" href="/knowledge-system/assets/js/10.83b8c0e1.js"><link rel="prefetch" href="/knowledge-system/assets/js/11.045bd3a3.js"><link rel="prefetch" href="/knowledge-system/assets/js/12.97bcf960.js"><link rel="prefetch" href="/knowledge-system/assets/js/13.bcb03fa2.js"><link rel="prefetch" href="/knowledge-system/assets/js/14.00ea3b8a.js"><link rel="prefetch" href="/knowledge-system/assets/js/15.39412c28.js"><link rel="prefetch" href="/knowledge-system/assets/js/16.8a5a354b.js"><link rel="prefetch" href="/knowledge-system/assets/js/17.d8dc25df.js"><link rel="prefetch" href="/knowledge-system/assets/js/18.70b99051.js"><link rel="prefetch" href="/knowledge-system/assets/js/19.f6d17ee0.js"><link rel="prefetch" href="/knowledge-system/assets/js/20.67c0def9.js"><link rel="prefetch" href="/knowledge-system/assets/js/21.cc3b5ad3.js"><link rel="prefetch" href="/knowledge-system/assets/js/22.de532c36.js"><link rel="prefetch" href="/knowledge-system/assets/js/23.3fc1899a.js"><link rel="prefetch" href="/knowledge-system/assets/js/24.0a93b35f.js"><link rel="prefetch" href="/knowledge-system/assets/js/25.4a50e71d.js"><link rel="prefetch" href="/knowledge-system/assets/js/26.96823b06.js"><link rel="prefetch" href="/knowledge-system/assets/js/27.25bdd59c.js"><link rel="prefetch" href="/knowledge-system/assets/js/28.c8be99d7.js"><link rel="prefetch" href="/knowledge-system/assets/js/29.d6fd4beb.js"><link rel="prefetch" href="/knowledge-system/assets/js/3.b58b8bc9.js"><link rel="prefetch" href="/knowledge-system/assets/js/30.27340547.js"><link rel="prefetch" href="/knowledge-system/assets/js/31.07a7065d.js"><link rel="prefetch" href="/knowledge-system/assets/js/32.97809239.js"><link rel="prefetch" href="/knowledge-system/assets/js/33.5e9b0afa.js"><link rel="prefetch" href="/knowledge-system/assets/js/34.baeb4fe7.js"><link rel="prefetch" href="/knowledge-system/assets/js/35.ba5aad26.js"><link rel="prefetch" href="/knowledge-system/assets/js/36.f674973f.js"><link rel="prefetch" href="/knowledge-system/assets/js/37.2ca6ce0e.js"><link rel="prefetch" href="/knowledge-system/assets/js/38.633749a3.js"><link rel="prefetch" href="/knowledge-system/assets/js/39.ac6cb7f8.js"><link rel="prefetch" href="/knowledge-system/assets/js/4.189e7355.js"><link rel="prefetch" href="/knowledge-system/assets/js/40.b462c041.js"><link rel="prefetch" href="/knowledge-system/assets/js/41.d19713dd.js"><link rel="prefetch" href="/knowledge-system/assets/js/42.cde09c06.js"><link rel="prefetch" href="/knowledge-system/assets/js/43.a8789389.js"><link rel="prefetch" href="/knowledge-system/assets/js/44.b195b929.js"><link rel="prefetch" href="/knowledge-system/assets/js/45.64bc5157.js"><link rel="prefetch" href="/knowledge-system/assets/js/46.2b25387f.js"><link rel="prefetch" href="/knowledge-system/assets/js/47.65b18197.js"><link rel="prefetch" href="/knowledge-system/assets/js/48.b124037e.js"><link rel="prefetch" href="/knowledge-system/assets/js/49.8cc09337.js"><link rel="prefetch" href="/knowledge-system/assets/js/5.80a102c2.js"><link rel="prefetch" href="/knowledge-system/assets/js/50.a0ea1b99.js"><link rel="prefetch" href="/knowledge-system/assets/js/51.6e25ce67.js"><link rel="prefetch" href="/knowledge-system/assets/js/52.bd1249fa.js"><link rel="prefetch" href="/knowledge-system/assets/js/53.c95baf1a.js"><link rel="prefetch" href="/knowledge-system/assets/js/54.98cc87eb.js"><link rel="prefetch" href="/knowledge-system/assets/js/55.cf73dd3a.js"><link rel="prefetch" href="/knowledge-system/assets/js/56.7ba79579.js"><link rel="prefetch" href="/knowledge-system/assets/js/57.1ded6bd2.js"><link rel="prefetch" href="/knowledge-system/assets/js/58.f4e4bea0.js"><link rel="prefetch" href="/knowledge-system/assets/js/59.b1b2d7a8.js"><link rel="prefetch" href="/knowledge-system/assets/js/6.aceb1378.js"><link rel="prefetch" href="/knowledge-system/assets/js/60.de8ca4e2.js"><link rel="prefetch" href="/knowledge-system/assets/js/61.8a3ad4c5.js"><link rel="prefetch" href="/knowledge-system/assets/js/62.9bd79808.js"><link rel="prefetch" href="/knowledge-system/assets/js/63.bb6801ba.js"><link rel="prefetch" href="/knowledge-system/assets/js/64.a7df4753.js"><link rel="prefetch" href="/knowledge-system/assets/js/65.653d7658.js"><link rel="prefetch" href="/knowledge-system/assets/js/66.646278b2.js"><link rel="prefetch" href="/knowledge-system/assets/js/67.c66dbba0.js"><link rel="prefetch" href="/knowledge-system/assets/js/68.659ecec8.js"><link rel="prefetch" href="/knowledge-system/assets/js/69.4345b1e6.js"><link rel="prefetch" href="/knowledge-system/assets/js/7.940087ca.js"><link rel="prefetch" href="/knowledge-system/assets/js/70.8841fceb.js"><link rel="prefetch" href="/knowledge-system/assets/js/71.86c0d6e3.js"><link rel="prefetch" href="/knowledge-system/assets/js/72.09d929ca.js"><link rel="prefetch" href="/knowledge-system/assets/js/73.8dfd11d4.js"><link rel="prefetch" href="/knowledge-system/assets/js/74.0435c543.js"><link rel="prefetch" href="/knowledge-system/assets/js/75.365f1fe5.js"><link rel="prefetch" href="/knowledge-system/assets/js/76.179b6773.js"><link rel="prefetch" href="/knowledge-system/assets/js/77.7624563f.js"><link rel="prefetch" href="/knowledge-system/assets/js/78.cd90ba9a.js"><link rel="prefetch" href="/knowledge-system/assets/js/79.dc2b9603.js"><link rel="prefetch" href="/knowledge-system/assets/js/8.bb821eb8.js"><link rel="prefetch" href="/knowledge-system/assets/js/80.0627d816.js"><link rel="prefetch" href="/knowledge-system/assets/js/81.69905481.js"><link rel="prefetch" href="/knowledge-system/assets/js/82.230c2c48.js"><link rel="prefetch" href="/knowledge-system/assets/js/83.9d758fe5.js"><link rel="prefetch" href="/knowledge-system/assets/js/85.3a9ca956.js"><link rel="prefetch" href="/knowledge-system/assets/js/86.e895f8b4.js"><link rel="prefetch" href="/knowledge-system/assets/js/87.4e7a893c.js"><link rel="prefetch" href="/knowledge-system/assets/js/88.a2c47419.js"><link rel="prefetch" href="/knowledge-system/assets/js/89.e0b9407c.js"><link rel="prefetch" href="/knowledge-system/assets/js/9.1b6ddf34.js"><link rel="prefetch" href="/knowledge-system/assets/js/90.fefc2a4b.js">
    <link rel="stylesheet" href="/knowledge-system/assets/css/0.styles.bb9d180c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/knowledge-system/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/knowledge-system/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/knowledge-system/CSS/layout/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/knowledge-system/JS/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/knowledge-system/React/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/knowledge-system/Vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/knowledge-system/broswer/work/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/knowledge-system/engineering/" class="nav-link">
  工程化
</a></div><div class="nav-item"><a href="/knowledge-system/scene/lottieUsage/" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="/knowledge-system/web3d/" class="nav-link">
  web3d
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/knowledge-system/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/knowledge-system/CSS/layout/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/knowledge-system/JS/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/knowledge-system/React/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/knowledge-system/Vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/knowledge-system/broswer/work/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/knowledge-system/engineering/" class="nav-link">
  工程化
</a></div><div class="nav-item"><a href="/knowledge-system/scene/lottieUsage/" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="/knowledge-system/web3d/" class="nav-link">
  web3d
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/knowledge-system/scene/lottieUsage.html" class="sidebar-link">lottie的应用场景</a></li><li><a href="/knowledge-system/scene/screenshoots.html" class="sidebar-link">前端截屏方案</a></li><li><a href="/knowledge-system/scene/modelViewer.html" class="sidebar-link">modelViewer</a></li><li><a href="/knowledge-system/scene/cli.html" aria-current="page" class="active sidebar-link">脚手架工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge-system/scene/cli.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/knowledge-system/scene/cli.html#代码流程" class="sidebar-link">代码流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge-system/scene/cli.html#先看一眼依赖" class="sidebar-link">先看一眼依赖</a></li><li class="sidebar-sub-header"><a href="/knowledge-system/scene/cli.html#再看代码" class="sidebar-link">再看代码</a></li><li class="sidebar-sub-header"><a href="/knowledge-system/scene/cli.html#原来这么简单-❕" class="sidebar-link">原来这么简单 ❕</a></li></ul></li></ul></li><li><a href="/knowledge-system/scene/vscode-extension.html" class="sidebar-link">vscode插件</a></li><li><a href="/knowledge-system/scene/pay.html" class="sidebar-link">支付</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>解锁新技能～开发一个脚手架工具<br>
说来惭愧，作为一个从业 4 年的前端，Node.js 还是零基础的状态。刚好业务中需要开发一个脚手架工具，所以就从一个简单的脚手架工具开始吧。</p> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 安装</span>
<span class="token function">npm</span> i <span class="token parameter variable">-g</span> @kittyfairy/cli
<span class="token comment"># 启动</span>
kf-cli
? 🧙 请选择模板 <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
<span class="token comment"># ... 省略 ...</span>
? 🔗 关联远程仓库地址？（可选）
<span class="token comment"># ... 省略 ...</span>
<span class="token operator">&gt;</span> <span class="token function">git</span> clone <span class="token punctuation">..</span>.
<span class="token operator">&gt;</span> ✅  完成❕

</code></pre></div><p>从使用流程上看，功能点就这几个：</p> <ul><li>可以在多种模板中选择一个</li> <li>拉取远程模板代码（剔除 git 信息、修改 packge.json）</li> <li>关联新的 git 仓库</li></ul> <p>🔔 tips：发布到 npm 的流程就不说了，接下来主要讲一下代码实现。</p> <h2 id="代码流程"><a href="#代码流程" class="header-anchor">#</a> 代码流程</h2> <p><img src="https://raw.githubusercontent.com/KittyFairy-Han/knowledge-system/af98c98b50297e7389886bd54557f53a56169d0f/docs/scene/static/cli_1.png" alt="核心流程"><br>
不多说了 ❕ 摆代码吧 ～</p> <h3 id="先看一眼依赖"><a href="#先看一眼依赖" class="header-anchor">#</a> 先看一眼依赖</h3> <ul><li>path Node.js 内置模块，提供了一些用于处理文件路径的小工具</li> <li>fs Node.js 提供一组类似 UNIX（POSIX）标准的文件操作 API</li> <li>yargs-parser 非内置，用于解析命令行参数</li> <li>chalk 非内置，用于美化终端打印的内容</li> <li>prettier 非内置，用于格式化代码</li> <li><a href="https://yeoman.io/learning/" target="_blank" rel="noopener noreferrer">yeoman-xxx<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 非内置，用于创建脚手架工具的依赖</li></ul> <h3 id="再看代码"><a href="#再看代码" class="header-anchor">#</a> 再看代码</h3> <p>🔔 一行一注，爱了爱了</p> <ul><li>cli.js 入口文件<br>
node 环境检查和命令行参数提取</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
#<span class="token operator">!</span><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env node <span class="token comment">//告诉系统这是一个 node 程序，使用 node 来执行它</span>

<span class="token keyword">const</span> yParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yargs-parser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> semver <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'semver'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> chalk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chalk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> run <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./lib/run'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// node 版本检查</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>semver<span class="token punctuation">.</span><span class="token function">satisfies</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>version<span class="token punctuation">,</span> <span class="token string">'&gt;= 8.0.0'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token string">'✘ The generator will only work with Node v8.0.0 and up!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ============= 提取命令行参数 =============</span>
<span class="token comment">//命令行运行 node cli aaa bbb ccc --bar=0 --foo=1 则 args = {_:[ 'aaa', 'bbb', 'ccc' ], bar: 0, foo: 1}</span>
<span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token function">yParser</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> args<span class="token punctuation">.</span>_<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> args<span class="token punctuation">.</span>_<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span> <span class="token operator">=</span> args<span class="token punctuation">;</span>
<span class="token keyword">delete</span> args<span class="token punctuation">.</span>type<span class="token punctuation">;</span>

<span class="token comment">// ============= 运行 =============</span>
<span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">,</span>type<span class="token punctuation">,</span>args<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//name 为项目名称，type 为模板类型，args 为其他参数</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&gt; Generate failed</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre></div><ul><li>lib/run.js<br>
yeoman 的一些套路，不用细究</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> mkdirp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mkdirp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> yeoman <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;yeoman-environment&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Generator <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./SimpleGenerator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> runGenerator <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> args <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> cwd <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// console.log(chalk.bgBlueBright(`name=: ${name}`));</span>
  <span class="token comment">// console.log(chalk.bgBlueBright(`type=: ${type}`));</span>
  <span class="token comment">// console.log(chalk.bgBlueBright(`args=: ${JSON.stringify(args)}`));</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mkdirp<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果提供了名称，则创建一个同名文件夹</span>
      cwd <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>cwd<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 更新当前工作目录路径</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// yeoman 是一个脚手架工具 ，后面这段代码就当固定写法吧，不用细纠</span>
    <span class="token keyword">const</span> env <span class="token operator">=</span> yeoman<span class="token punctuation">.</span><span class="token function">createEnv</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      cwd<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> generator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Generator</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token punctuation">,</span>
      type<span class="token punctuation">,</span>
      env<span class="token punctuation">,</span>
      <span class="token literal-property property">resolved</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;./SimpleGenerator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      args<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 开始依次调用我们的 prompting、writing 方法</span>
    generator<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;✨ 一切就绪&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 所有工作完成后</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> runGenerator<span class="token punctuation">;</span>
</code></pre></div><ul><li>lib/SimpleGenerator.js<br>
我们要实现的内容几乎都在这儿 📌 啦</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs-extra&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> chalk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;chalk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rimraf <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;rimraf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> prettier <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;prettier&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Generator <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;yeoman-generator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">gray</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ======== 预设的模板 =========</span>
<span class="token keyword">const</span> tplUrlMap <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;vue-h5-tpl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git@github.com:KittyFairy-Han/vue-sell.git&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;angular-tpl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git@github.com:KittyFairy-Han/angular-hero.git&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;jquery-tpl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git@github.com:KittyFairy-Han/littleHdu.git&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;vue-echart-tpl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git@github.com:KittyFairy-Han/data-collection-visible.git&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ======== 命令行交互时，选项 =========</span>
<span class="token keyword">const</span> tplChoices <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;vue-echart-tpl: 基于 echarts 的 PC 端项目模板，包含数据可视化&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;vue-echart-tpl&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;vue-h5-tpl: 基于 vue 的移动端 H5 项目模板&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;vue-h5-tpl&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;angular-tpl: 基于 angular 的 PC 端项目模板&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;angular-tpl&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;jquery-tpl: 基于 jquery 的古早项目模板&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;jquery-tpl&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AntDesignProGenerator</span> <span class="token keyword">extends</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token operator">...</span>opts <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// opts = {env,resolved,args}</span>

    <span class="token keyword">super</span><span class="token punctuation">(</span>opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>opts <span class="token operator">=</span> opts<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">async</span> <span class="token function">prompting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// log(`🪜 生成器准备结束 开始界面交互`);</span>
    <span class="token keyword">const</span> questions <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;tpl&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">choices</span><span class="token operator">:</span> tplChoices<span class="token punctuation">,</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;🧙 请选择模板&quot;</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token punctuation">,</span> <span class="token comment">// 如果命令行参数中提供了 type，则使用该值作为默认值</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">请填写项目名称</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token comment">// 如果命令行参数中提供了 name，则使用该值作为默认值</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;remote&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">你项目的远程仓库地址？（可选填）</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 这两行代码的目的是通知父进程当前进程已经准备好进行交互，或者可以开始接受来自父进程的指令或消息。</span>
    <span class="token comment">// 这种通信机制在命令行工具和它的子进程之间很常见，用于控制命令行界面的交互行为。</span>
    process<span class="token punctuation">.</span>send <span class="token operator">&amp;&amp;</span> process<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;prompt&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    process<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;prompt&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> answers <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span>questions<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>answers <span class="token operator">=</span> answers<span class="token punctuation">;</span>
    <span class="token comment">// log(`🪜 界面交互结束 准备拉取模板`);</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">⚙️ 准备就绪！</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">writing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/*=== 切换环境 */</span>
    <span class="token comment">// console.log(chalk.bgBlueBright(`answers=: ${JSON.stringify(this.answers)}`));</span>
    <span class="token keyword">const</span> projectName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>answers<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>opts<span class="token punctuation">.</span>env<span class="token punctuation">.</span>cwd<span class="token punctuation">;</span> <span class="token comment">//如果用户提供了项目名称，就使用该名称；否则使用当前工作目录的名称作为项目名称。</span>
    <span class="token keyword">const</span> projectPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>projectName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将项目名称解析为绝对路径，得到项目的完整路径。</span>
    <span class="token keyword">const</span> projectRemote <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>answers<span class="token punctuation">.</span>remote<span class="token punctuation">;</span>
    <span class="token comment">// log('📁 准备写入文件到：', projectPath);</span>

    <span class="token comment">/** 一些检查 */</span>
    <span class="token keyword">const</span> yoConfigPth <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>projectPath<span class="token punctuation">,</span> <span class="token string">&quot;.yo-repository&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>yoConfigPth<span class="token punctuation">)</span><span class="token punctuation">)</span> rimraf<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span>yoConfigPth<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 删除 .yo-repository</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>projectPath<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
      fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>projectPath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
      fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>projectPath<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">🙈 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token string">&quot;请在空文件夹中使用&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">//检查项目路径是否为空</span>

    <span class="token comment">/** 拉代码 */</span>
    <span class="token keyword">const</span> githubUrl <span class="token operator">=</span> tplUrlMap<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>answers<span class="token punctuation">.</span>tpl<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> gitArgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">clone</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> githubUrl<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">--depth=1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> projectName<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//--depth=1 参数指定克隆仓库的深度，只获取最近一次提交的内容，以加快克隆速度。</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">spawnCommandSync</span><span class="token punctuation">(</span><span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span> gitArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">🚚 clone 成功！</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/** 处理文件 */</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> packageJsonPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>projectPath<span class="token punctuation">,</span> <span class="token string">&quot;package.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> pkg <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>packageJsonPath<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//package.json 读取成一个对象</span>
      <span class="token comment">// console.log(`🙈 ${JSON.stringify(pkg)}`);</span>
      pkg<span class="token punctuation">.</span>name <span class="token operator">=</span> projectName<span class="token punctuation">;</span> <span class="token comment">//修改 package.json 中的内容</span>
      pkg<span class="token punctuation">.</span>remote <span class="token operator">=</span> projectRemote<span class="token punctuation">;</span>
      fs<span class="token punctuation">.</span><span class="token function">writeJSONSync</span><span class="token punctuation">(</span>packageJsonPath<span class="token punctuation">,</span> pkg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> formattedCode <span class="token operator">=</span> prettier<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>
        fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>packageJsonPath<span class="token punctuation">,</span> <span class="token string">&quot;utf8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>packageJsonPath<span class="token punctuation">,</span> formattedCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">🙈 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chalk<span class="token punctuation">.</span><span class="token function">yellow</span><span class="token punctuation">(</span><span class="token string">&quot;package.json 不存在，代码模板可能存在问题&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> gitFolderPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>projectPath<span class="token punctuation">,</span> <span class="token string">&quot;.git&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 删除整个 .git 目录</span>
    fs<span class="token punctuation">.</span><span class="token function">removeSync</span><span class="token punctuation">(</span>gitFolderPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/** 关联新的 git */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>projectRemote<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">spawnCommandSync</span><span class="token punctuation">(</span><span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;init&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">cwd</span><span class="token operator">:</span> projectPath <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">spawnCommandSync</span><span class="token punctuation">(</span><span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">cwd</span><span class="token operator">:</span> projectPath <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">spawnCommandSync</span><span class="token punctuation">(</span><span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;commit&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-m&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;init&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">cwd</span><span class="token operator">:</span> projectPath<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">spawnCommandSync</span><span class="token punctuation">(</span><span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;remote&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;origin&quot;</span><span class="token punctuation">,</span> projectRemote<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">cwd</span><span class="token operator">:</span> projectPath<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">spawnCommandSync</span><span class="token punctuation">(</span><span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;pull&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--rebase&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;origin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;main&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">cwd</span><span class="token operator">:</span> projectPath<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;🔗 git 仓库关联成功！请刷新 git 工具查看是否有冲突文件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> AntDesignProGenerator<span class="token punctuation">;</span>
</code></pre></div><h3 id="原来这么简单-❕"><a href="#原来这么简单-❕" class="header-anchor">#</a> 原来这么简单 ❕</h3></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/knowledge-system/scene/modelViewer.html" class="prev">
        modelViewer
      </a></span> <span class="next"><a href="/knowledge-system/scene/vscode-extension.html">
        vscode插件
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/knowledge-system/assets/js/app.3f30ee57.js" defer></script><script src="/knowledge-system/assets/js/2.1e2e5af0.js" defer></script><script src="/knowledge-system/assets/js/84.89b124f1.js" defer></script>
  </body>
</html>
